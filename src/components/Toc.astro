---
const { headings } = Astro.props;
---
<details class="toc-details">
    <summary>Table Of Contents</summary>
    <ul>
        {headings.map(heading => (
            <li>
                <a href={`#${heading.slug}`}>{heading.text.replace(/^#\s*/, '')}</a>
                {heading.children && heading.children.length > 0 && (
                    <ul>
                        {heading.children.map(child => (
                            <li>
                                <a href={`#${child.slug}`}>{child.text.replace(/^#\s*/, '')}</a>
                            </li>
                        ))}
                    </ul>
                )}
            </li>
        ))}
    </ul>
</details>

<style>
    .toc-details {
        border: none;
        border-radius: 4px;
    }
    .toc-details ul {
        list-style: circle;
        padding-left: 3rem;
    }
    .toc-details a {
        color: inherit;
        text-decoration: none;
    }
    .toc-details a:hover {
        text-decoration: underline;
    }
</style>